{"ast":null,"code":"import _slicedToArray from\"/Users/justinas/Documents/repos/teamProject/web/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useEffect}from'react';import{useState}from'react';import MyContext from'../../context';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),authErrorMsg=_useState2[0],setAuthErrorMsg=_useState2[1];var _useContext=useContext(MyContext),UID=_useContext.UID,setUID=_useContext.setUID;function submitForm(e){e.preventDefault();var xhr=new XMLHttpRequest();xhr.open(\"POST\",'http://localhost:8080/login',true);xhr.setRequestHeader('Content-Type','application/json');xhr.send(JSON.stringify({email:e.currentTarget.email.value,password:e.currentTarget.password.value}));xhr.onload=function(){var parsedResponse=JSON.parse(xhr.responseText);if(parsedResponse.UID){setUID(parsedResponse.UID);props.setAuthenticated(true);}else{setAuthErrorMsg(xhr.responseText);}};}return/*#__PURE__*/_jsx(\"div\",{className:\"login-component\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(e){submitForm(e);},children:[/*#__PURE__*/_jsx(\"p\",{children:\"Sign in to your account\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"login-comoponent-inputHolder\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"email\",name:\"email\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"password\",name:\"password\",type:\"password\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"auth-component-errorMsg\",children:authErrorMsg}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",children:\"Log in\"}),/*#__PURE__*/_jsx(\"button\",{className:\"auth-goBack-btn\",type:\"button\",onClick:function onClick(){props.authState.setAuthButton('default');},children:\"Go back\"})]})});}export default Login;","map":{"version":3,"names":["React","useContext","useEffect","useState","MyContext","Login","props","authErrorMsg","setAuthErrorMsg","UID","setUID","submitForm","e","preventDefault","xhr","XMLHttpRequest","open","setRequestHeader","send","JSON","stringify","email","currentTarget","value","password","onload","parsedResponse","parse","responseText","setAuthenticated","authState","setAuthButton"],"sources":["/Users/justinas/Documents/repos/teamProject/web/frontend/src/Components/Authentication/Login.jsx"],"sourcesContent":["import React, { useContext, useEffect } from 'react';\nimport { useState } from 'react';\n\nimport MyContext from '../../context';\n\nfunction Login(props){\n    \n    const [authErrorMsg, setAuthErrorMsg] = useState('');\n\n    const { UID, setUID } = useContext(MyContext);\n    \n    function submitForm(e){\n        e.preventDefault();\n        let xhr = new XMLHttpRequest();\n        xhr.open(\"POST\", 'http://localhost:8080/login', true);\n        xhr.setRequestHeader('Content-Type', 'application/json');\n        xhr.send(JSON.stringify({\n            email: e.currentTarget.email.value,\n            password: e.currentTarget.password.value\n        }));\n\n        xhr.onload = ()=>{\n            const parsedResponse = JSON.parse(xhr.responseText);\n            if(parsedResponse.UID){\n                setUID(parsedResponse.UID);\n                props.setAuthenticated(true);\n            } else {\n                setAuthErrorMsg(xhr.responseText);\n            }\n        }\n    }\n\n    return (\n        <div className='login-component'>\n        <form onSubmit={(e)=>{submitForm(e)}}>\n            <p>Sign in to your account</p>\n            <div className='login-comoponent-inputHolder'>\n                <label htmlFor='email'>Email:</label>\n                <input id='email' name='email'></input>\n                <label htmlFor='password'>Password:</label>\n                <input id='password' name='password' type='password'></input>\n            </div>\n            <p className='auth-component-errorMsg'>{authErrorMsg}</p>\n            <button className='button'>Log in</button>\n            <button className='auth-goBack-btn' type='button' onClick={()=>{props.authState.setAuthButton('default')}}>Go back</button>\n        </form>\n    </div>\n    );\n}\n\nexport default Login;"],"mappings":"8IAAA,MAAOA,MAAK,EAAIC,UAAU,CAAEC,SAAS,KAAQ,OAAO,CACpD,OAASC,QAAQ,KAAQ,OAAO,CAEhC,MAAOC,UAAS,KAAM,eAAe,CAAC,wFAEtC,QAASC,MAAK,CAACC,KAAK,CAAC,CAEjB,cAAwCH,QAAQ,CAAC,EAAE,CAAC,wCAA7CI,YAAY,eAAEC,eAAe,eAEpC,gBAAwBP,UAAU,CAACG,SAAS,CAAC,CAArCK,GAAG,aAAHA,GAAG,CAAEC,MAAM,aAANA,MAAM,CAEnB,QAASC,WAAU,CAACC,CAAC,CAAC,CAClBA,CAAC,CAACC,cAAc,EAAE,CAClB,GAAIC,IAAG,CAAG,GAAIC,eAAc,EAAE,CAC9BD,GAAG,CAACE,IAAI,CAAC,MAAM,CAAE,6BAA6B,CAAE,IAAI,CAAC,CACrDF,GAAG,CAACG,gBAAgB,CAAC,cAAc,CAAE,kBAAkB,CAAC,CACxDH,GAAG,CAACI,IAAI,CAACC,IAAI,CAACC,SAAS,CAAC,CACpBC,KAAK,CAAET,CAAC,CAACU,aAAa,CAACD,KAAK,CAACE,KAAK,CAClCC,QAAQ,CAAEZ,CAAC,CAACU,aAAa,CAACE,QAAQ,CAACD,KACvC,CAAC,CAAC,CAAC,CAEHT,GAAG,CAACW,MAAM,CAAG,UAAI,CACb,GAAMC,eAAc,CAAGP,IAAI,CAACQ,KAAK,CAACb,GAAG,CAACc,YAAY,CAAC,CACnD,GAAGF,cAAc,CAACjB,GAAG,CAAC,CAClBC,MAAM,CAACgB,cAAc,CAACjB,GAAG,CAAC,CAC1BH,KAAK,CAACuB,gBAAgB,CAAC,IAAI,CAAC,CAChC,CAAC,IAAM,CACHrB,eAAe,CAACM,GAAG,CAACc,YAAY,CAAC,CACrC,CACJ,CAAC,CACL,CAEA,mBACI,YAAK,SAAS,CAAC,iBAAiB,uBAChC,cAAM,QAAQ,CAAE,kBAAChB,CAAC,CAAG,CAACD,UAAU,CAACC,CAAC,CAAC,EAAE,wBACjC,8CAA8B,cAC9B,aAAK,SAAS,CAAC,8BAA8B,wBACzC,cAAO,OAAO,CAAC,OAAO,oBAAe,cACrC,cAAO,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,EAAS,cACvC,cAAO,OAAO,CAAC,UAAU,uBAAkB,cAC3C,cAAO,EAAE,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,EAAS,GAC3D,cACN,UAAG,SAAS,CAAC,yBAAyB,UAAEL,YAAY,EAAK,cACzD,eAAQ,SAAS,CAAC,QAAQ,oBAAgB,cAC1C,eAAQ,SAAS,CAAC,iBAAiB,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAE,kBAAI,CAACD,KAAK,CAACwB,SAAS,CAACC,aAAa,CAAC,SAAS,CAAC,EAAE,qBAAiB,GACxH,EACL,CAEV,CAEA,cAAe1B,MAAK"},"metadata":{},"sourceType":"module"}