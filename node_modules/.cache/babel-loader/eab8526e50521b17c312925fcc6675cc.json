{"ast":null,"code":"import _regeneratorRuntime from\"/Users/justinas/Documents/repos/teamProject/web/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/justinas/Documents/repos/teamProject/web/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/justinas/Documents/repos/teamProject/web/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useContext}from'react';import MyContext from'../../context';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Signup(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),authErrorMsg=_useState2[0],setAuthErrorMsg=_useState2[1];var _useContext=useContext(MyContext),UID=_useContext.UID,setUID=_useContext.setUID;function checkSubmit(_x){return _checkSubmit.apply(this,arguments);}function _checkSubmit(){_checkSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var xhr;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(props);e.preventDefault();xhr=new XMLHttpRequest();xhr.open(\"POST\",'http://localhost:8080/signup',true);xhr.setRequestHeader('Content-Type','application/json');xhr.send(JSON.stringify({email:e.currentTarget.email.value,emailR:e.currentTarget.emailR.value,password:e.currentTarget.password.value,passwordR:e.currentTarget.passwordR.value}));xhr.onload=function(){var parsedResponse=JSON.parse(xhr.responseText);console.log(parsedResponse);if(parsedResponse.UID){setUID(parsedResponse.UID);props.setAuthenticated(true);}else{setAuthErrorMsg(parsedResponse);}};case 7:case\"end\":return _context.stop();}}},_callee);}));return _checkSubmit.apply(this,arguments);}return/*#__PURE__*/_jsx(\"div\",{className:\"signup-component\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(e){checkSubmit(e);},children:[/*#__PURE__*/_jsx(\"p\",{children:\"Fill in the form\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"signup-component-emailDiv\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"email\",name:\"email\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"emailR\",children:\"Repeat email:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"emailR\",name:\"emailR\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"signup-component-passwordDiv\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",typeof:\"password\",children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"password\",name:\"password\",type:\"password\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"passwordR\",typeof:\"password\",children:\"Repeat password:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"passwordR\",name:\"passwordR\",type:\"password\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"auth-component-errorMsg\",children:authErrorMsg}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",children:\"Sign up\"}),/*#__PURE__*/_jsx(\"button\",{className:\"auth-goBack-btn\",type:\"button\",onClick:function onClick(){props.authState.setAuthButton('default');},children:\"Go back\"})]})});}export default Signup;","map":{"version":3,"names":["React","useState","useContext","MyContext","Signup","props","authErrorMsg","setAuthErrorMsg","UID","setUID","checkSubmit","e","console","log","preventDefault","xhr","XMLHttpRequest","open","setRequestHeader","send","JSON","stringify","email","currentTarget","value","emailR","password","passwordR","onload","parsedResponse","parse","responseText","setAuthenticated","authState","setAuthButton"],"sources":["/Users/justinas/Documents/repos/teamProject/web/frontend/src/Components/Authentication/Signup.jsx"],"sourcesContent":["import React, { useState, useContext } from 'react';\n\nimport MyContext from '../../context';\n\nfunction Signup(props) {\n\n    const [authErrorMsg, setAuthErrorMsg] = useState('');\n\n    const { UID, setUID } = useContext(MyContext);\n\n    async function checkSubmit(e){\n        console.log(props)\n\n        e.preventDefault();\n        let xhr = new XMLHttpRequest();\n        xhr.open(\"POST\", 'http://localhost:8080/signup', true);\n        xhr.setRequestHeader('Content-Type', 'application/json');\n        xhr.send(JSON.stringify({\n            email: e.currentTarget.email.value,\n            emailR: e.currentTarget.emailR.value,\n            password: e.currentTarget.password.value,\n            passwordR: e.currentTarget.passwordR.value\n        }));\n\n        xhr.onload = ()=>{\n            const parsedResponse = JSON.parse(xhr.responseText);\n            console.log(parsedResponse)\n            if(parsedResponse.UID){\n                setUID(parsedResponse.UID);\n                props.setAuthenticated(true);\n            } else {\n                setAuthErrorMsg(parsedResponse);\n            }\n        }\n    }\n\n    return (\n        <div className='signup-component'>\n            <form onSubmit={(e)=>{checkSubmit(e)}}>\n                <p>Fill in the form</p>\n                <div className='signup-component-emailDiv'>\n                    <label htmlFor='email'>Email:</label>\n                    <input id='email' name='email'></input>\n                    <label htmlFor='emailR'>Repeat email:</label>\n                    <input id='emailR' name='emailR'></input>\n                </div>\n                <div className='signup-component-passwordDiv'>\n                    <label htmlFor='password' typeof='password'>Password:</label>\n                    <input id='password' name='password' type='password'></input>\n                    <label htmlFor='passwordR' typeof='password'>Repeat password:</label>\n                    <input id='passwordR' name='passwordR' type='password'></input>\n                </div>\n                <p className='auth-component-errorMsg'>{authErrorMsg}</p>\n                <button className='button'>Sign up</button>\n                <button className='auth-goBack-btn' type='button' onClick={()=>{props.authState.setAuthButton('default')}}>Go back</button>\n            </form>\n        </div>\n    );\n}\nexport default Signup;"],"mappings":"0bAAA,MAAOA,MAAK,EAAIC,QAAQ,CAAEC,UAAU,KAAQ,OAAO,CAEnD,MAAOC,UAAS,KAAM,eAAe,CAAC,wFAEtC,QAASC,OAAM,CAACC,KAAK,CAAE,CAEnB,cAAwCJ,QAAQ,CAAC,EAAE,CAAC,wCAA7CK,YAAY,eAAEC,eAAe,eAEpC,gBAAwBL,UAAU,CAACC,SAAS,CAAC,CAArCK,GAAG,aAAHA,GAAG,CAAEC,MAAM,aAANA,MAAM,CAA2B,QAE/BC,YAAW,+IAA1B,iBAA2BC,CAAC,4HACxBC,OAAO,CAACC,GAAG,CAACR,KAAK,CAAC,CAElBM,CAAC,CAACG,cAAc,EAAE,CACdC,GAAG,CAAG,GAAIC,eAAc,EAAE,CAC9BD,GAAG,CAACE,IAAI,CAAC,MAAM,CAAE,8BAA8B,CAAE,IAAI,CAAC,CACtDF,GAAG,CAACG,gBAAgB,CAAC,cAAc,CAAE,kBAAkB,CAAC,CACxDH,GAAG,CAACI,IAAI,CAACC,IAAI,CAACC,SAAS,CAAC,CACpBC,KAAK,CAAEX,CAAC,CAACY,aAAa,CAACD,KAAK,CAACE,KAAK,CAClCC,MAAM,CAAEd,CAAC,CAACY,aAAa,CAACE,MAAM,CAACD,KAAK,CACpCE,QAAQ,CAAEf,CAAC,CAACY,aAAa,CAACG,QAAQ,CAACF,KAAK,CACxCG,SAAS,CAAEhB,CAAC,CAACY,aAAa,CAACI,SAAS,CAACH,KACzC,CAAC,CAAC,CAAC,CAEHT,GAAG,CAACa,MAAM,CAAG,UAAI,CACb,GAAMC,eAAc,CAAGT,IAAI,CAACU,KAAK,CAACf,GAAG,CAACgB,YAAY,CAAC,CACnDnB,OAAO,CAACC,GAAG,CAACgB,cAAc,CAAC,CAC3B,GAAGA,cAAc,CAACrB,GAAG,CAAC,CAClBC,MAAM,CAACoB,cAAc,CAACrB,GAAG,CAAC,CAC1BH,KAAK,CAAC2B,gBAAgB,CAAC,IAAI,CAAC,CAChC,CAAC,IAAM,CACHzB,eAAe,CAACsB,cAAc,CAAC,CACnC,CACJ,CAAC,uDACJ,8CAED,mBACI,YAAK,SAAS,CAAC,kBAAkB,uBAC7B,cAAM,QAAQ,CAAE,kBAAClB,CAAC,CAAG,CAACD,WAAW,CAACC,CAAC,CAAC,EAAE,wBAClC,uCAAuB,cACvB,aAAK,SAAS,CAAC,2BAA2B,wBACtC,cAAO,OAAO,CAAC,OAAO,oBAAe,cACrC,cAAO,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,EAAS,cACvC,cAAO,OAAO,CAAC,QAAQ,2BAAsB,cAC7C,cAAO,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,EAAS,GACvC,cACN,aAAK,SAAS,CAAC,8BAA8B,wBACzC,cAAO,OAAO,CAAC,UAAU,CAAC,MAAM,CAAC,UAAU,uBAAkB,cAC7D,cAAO,EAAE,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,EAAS,cAC7D,cAAO,OAAO,CAAC,WAAW,CAAC,MAAM,CAAC,UAAU,8BAAyB,cACrE,cAAO,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,EAAS,GAC7D,cACN,UAAG,SAAS,CAAC,yBAAyB,UAAEL,YAAY,EAAK,cACzD,eAAQ,SAAS,CAAC,QAAQ,qBAAiB,cAC3C,eAAQ,SAAS,CAAC,iBAAiB,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAE,kBAAI,CAACD,KAAK,CAAC4B,SAAS,CAACC,aAAa,CAAC,SAAS,CAAC,EAAE,qBAAiB,GACxH,EACL,CAEd,CACA,cAAe9B,OAAM"},"metadata":{},"sourceType":"module"}